<ion-header class="ion-no-border bg-white text-black border-b border-gray-100">
  <ion-toolbar class="bg-white" style="--background: white; --color: black;">
    <div class="flex items-center justify-between px-2">
      <ion-button fill="clear" color="dark" (click)="goBack()">
        <ion-icon name="chevron-back" slot="icon-only" class="text-2xl"></ion-icon>
      </ion-button>
      <ion-title class="font-bold text-lg text-center">Edit profile</ion-title>
      <div class="w-10"></div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="bg-white text-black">
  <!-- Hidden File Input -->
  <input type="file" #fileInput (change)="onFileSelected($event)" accept="image/*" class="hidden">

  <!-- Avatar Section -->
  <div class="flex flex-col items-center mt-8 mb-8" (click)="triggerPhoto()">
    <div class="relative w-24 h-24 mb-4">
      <div
        class="w-full h-full rounded-full bg-gray-100 overflow-hidden flex items-center justify-center relative border border-gray-100">
        <!-- Real Avatar -->
        <img *ngIf="editData.photoURL" [src]="editData.photoURL" class="w-full h-full object-cover">
        <ion-icon *ngIf="!editData.photoURL" name="person" class="text-6xl text-gray-300"></ion-icon>

        <!-- Dark Overlay -->
        <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
          <ion-icon name="camera-outline" class="text-3xl text-white"></ion-icon>
        </div>
      </div>
    </div>
    <div class="text-[13px] font-semibold text-gray-800">Change photo</div>
  </div>

  <!-- About You Section -->
  <div class="px-4">
    <div class="text-xs text-gray-400 font-bold mb-4 pl-1 uppercase tracking-wider">About you</div>

    <!-- Name -->
    <div (click)="editField('name')"
      class="flex items-center justify-between py-4 border-b border-gray-100/50 active:bg-gray-50 transition-colors">
      <div class="font-medium text-[15px] text-gray-600">Name</div>
      <div class="flex items-center gap-2">
        <span class="text-[15px] font-medium text-black">{{editData.displayName || 'Set Name'}}</span>
        <ion-icon name="chevron-forward" class="text-gray-300 text-lg"></ion-icon>
      </div>
    </div>

    <!-- Username -->
    <div (click)="editField('username')"
      class="flex items-center justify-between py-4 border-b border-gray-100/50 active:bg-gray-50 transition-colors">
      <div class="font-medium text-[15px] text-gray-600">Username</div>
      <div class="flex items-center gap-2">
        <span class="text-[15px] font-medium text-black">{{editData.username || 'Set Username'}}</span>
        <ion-icon name="chevron-forward" class="text-gray-300 text-lg"></ion-icon>
      </div>
    </div>

    <!-- Website/Links -->
    <div class="flex items-center justify-between py-4 cursor-pointer active:bg-gray-50 transition-colors"
      (click)="copyLink()">
      <div class="font-medium text-[15px] text-gray-600">Toko Link</div>
      <div class="flex items-center gap-2 overflow-hidden">
        <span class="text-[15px] font-medium text-gray-400 truncate">tokotok.com/@{{editData.username || 'user'}}</span>
        <ion-icon name="copy-outline" class="text-gray-400 text-sm"></ion-icon>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <ion-modal [isOpen]="showEditModal" (didDismiss)="showEditModal = false" class="edit-modal">
    <ng-template>
      <ion-header class="ion-no-border">
        <ion-toolbar style="--background: white; --color: black;">
          <ion-title>{{editingField | titlecase}}</ion-title>
          <ion-button slot="start" fill="clear" color="dark" (click)="showEditModal = false">
            <ion-icon name="close"></ion-icon>
          </ion-button>
          <ion-button slot="end" fill="clear" color="primary" class="font-bold" (click)="saveField()">
            Save
          </ion-button>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding bg-gray-50">
        <div class="bg-white rounded-lg border border-gray-100 p-2">
          <ion-input [(ngModel)]="tempValue" placeholder="Enter {{editingField}}" class="text-lg"></ion-input>
        </div>
        <p class="text-xs text-gray-400 mt-2 px-1">Your {{editingField}} can be seen by everyone on Toko.</p>
      </ion-content>
    </ng-template>
  </ion-modal>

</ion-content>